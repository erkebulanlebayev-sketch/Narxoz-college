# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (Vercel + Supabase)

## 1. –£–∑–Ω–∞–π—Ç–µ URL –≤–∞—à–µ–≥–æ Vercel –ø—Ä–æ–µ–∫—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [vercel.com/dashboard](https://vercel.com/dashboard)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **Narxoz-college**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://narxoz-college.vercel.app`)

## 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### A. Site URL

1. –û—Ç–∫—Ä–æ–π—Ç–µ [app.supabase.com](https://app.supabase.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ù–∞–∂–º–∏—Ç–µ **‚öôÔ∏è Settings** (–≤–Ω–∏–∑—É —Å–ª–µ–≤–∞)
4. –í—ã–±–µ—Ä–∏—Ç–µ **API**
5. –ù–∞–π–¥–∏—Ç–µ **Site URL** –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
   ```
   https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app
   ```
   (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π URL)
6. –ù–∞–∂–º–∏—Ç–µ **Save**

### B. Redirect URLs

–í —Ç–æ–π –∂–µ —Å–µ–∫—Ü–∏–∏ **Settings** ‚Üí **API**:

1. –ù–∞–π–¥–∏—Ç–µ **Redirect URLs**
2. –î–æ–±–∞–≤—å—Ç–µ (–∫–∞–∂–¥—ã–π –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ):
   ```
   https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/**
   https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/reset-password
   http://localhost:4001/**
   http://localhost:4001/reset-password
   ```
3. –ù–∞–∂–º–∏—Ç–µ **Save**

## 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º

**–ë–µ–∑ SMTP –ø–∏—Å—å–º–∞ –ù–ï –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**

### –í–∞—Ä–∏–∞–Ω—Ç 1: Gmail (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –¥–ª—è —Ç–µ—Å—Ç–æ–≤)

1. –í Supabase: **Settings** ‚Üí **API** ‚Üí –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑
2. –ù–∞–π–¥–∏—Ç–µ **SMTP Settings**
3. –í–∫–ª—é—á–∏—Ç–µ **Enable Custom SMTP**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   ```
   Host: smtp.gmail.com
   Port: 587
   Username: –≤–∞—à-email@gmail.com
   Password: –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å!)
   Sender email: –≤–∞—à-email@gmail.com
   Sender name: Narxoz College
   ```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Gmail:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [myaccount.google.com/security](https://myaccount.google.com/security)
2. –í–∫–ª—é—á–∏—Ç–µ **2-Step Verification** (–µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞)
3. –ù–∞–π–¥–∏—Ç–µ **App passwords**
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è "Mail"
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ 16-–∑–Ω–∞—á–Ω—ã–π –ø–∞—Ä–æ–ª—å
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ Supabase SMTP Password

### –í–∞—Ä–∏–∞–Ω—Ç 2: SendGrid (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [sendgrid.com](https://sendgrid.com) (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 100 –ø–∏—Å–µ–º/–¥–µ–Ω—å)
2. –°–æ–∑–¥–∞–π—Ç–µ API Key
3. –í Supabase SMTP Settings:
   ```
   Host: smtp.sendgrid.net
   Port: 587
   Username: apikey
   Password: –≤–∞—à-API-key
   Sender email: –≤–∞—à-email@–¥–æ–º–µ–Ω.com
   Sender name: Narxoz College
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Mailgun

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [mailgun.com](https://mailgun.com)
2. –ü–æ–ª—É—á–∏—Ç–µ SMTP credentials
3. –í Supabase SMTP Settings:
   ```
   Host: smtp.mailgun.org
   Port: 587
   Username: –≤–∞—à-username
   Password: –≤–∞—à-password
   Sender email: –≤–∞—à-email@–¥–æ–º–µ–Ω.com
   Sender name: Narxoz College
   ```

## 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Storage –¥–ª—è –æ–±–º–µ–Ω–Ω–∏–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

### A. –°–æ–∑–¥–∞–π—Ç–µ bucket (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)

1. –í Supabase: **Storage**
2. –ù–∞–∂–º–∏—Ç–µ **New bucket**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - Name: `materials`
   - Public: ‚úÖ (–≤–∫–ª—é—á–∏—Ç—å)
4. –ù–∞–∂–º–∏—Ç–µ **Create**

### B. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

1. –í—ã–±–µ—Ä–∏—Ç–µ bucket `materials`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Policies**
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `supabase-storage-setup.sql`

–ò–ª–∏ –≤ **SQL Editor** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
-- –†–∞–∑—Ä–µ—à–∞–µ–º —á–∏—Ç–∞—Ç—å –≤—Å–µ–º
CREATE POLICY "Allow authenticated users to read materials"
ON storage.objects FOR SELECT
TO authenticated
USING (bucket_id = 'materials');

-- –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ–º
CREATE POLICY "Allow authenticated users to upload materials"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'materials');

-- –†–∞–∑—Ä–µ—à–∞–µ–º —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã
CREATE POLICY "Allow users to delete own materials"
ON storage.objects FOR DELETE
TO authenticated
USING (
  bucket_id = 'materials' 
  AND (storage.foldername(name))[1] = auth.uid()::text
);
```

## 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ [vercel.com/dashboard](https://vercel.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **Narxoz-college**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment Variables**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å:
   ```
   NEXT_PUBLIC_SUPABASE_URL=–≤–∞—à-supabase-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=–≤–∞—à-anon-key
   ```
5. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –∏–∑ `.env.local`

## 6. Redeploy –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

1. –í Vercel Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ù–∞–∂–º–∏—Ç–µ **Deployments**
3. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
4. –ù–∞–∂–º–∏—Ç–µ **‚ãØ** (—Ç—Ä–∏ —Ç–æ—á–∫–∏) ‚Üí **Redeploy**

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤—ã–π commit:
```bash
git commit --allow-empty -m "trigger redeploy"
git push
```

## 7. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/login`
2. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"**
3. –í–≤–µ–¥–∏—Ç–µ email
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø–∏—Å—å–º–æ
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ –ø–∏—Å—å–º–∞
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
7. –í–æ–π–¥–∏—Ç–µ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

## 8. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–º–µ–Ω–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–û–±–º–µ–Ω–Ω–∏–∫**
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü–∏—Å—å–º–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Audit Logs –≤ Supabase
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SMTP –≤–∫–ª—é—á–µ–Ω

### –û—à–∏–±–∫–∞ "Invalid redirect URL"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Site URL –≤ Supabase
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URLs
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Vercel URL

### –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –æ–±–º–µ–Ω–Ω–∏–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ bucket `materials` —Å–æ–∑–¥–∞–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ bucket –ø—É–±–ª–∏—á–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Storage ‚Üí Logs

### –û—à–∏–±–∫–∞ 500 –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard ‚Üí Deployments ‚Üí Functions
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Logs

## –ì–æ—Ç–æ–≤–æ! üéâ

–í–∞—à –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ SMTP
- ‚úÖ –û–±–º–µ–Ω–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω

1. –í Vercel: **Settings** ‚Üí **Domains**
2. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `narxoz.kz`)
3. –û–±–Ω–æ–≤–∏—Ç–µ Site URL –≤ Supabase –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω
4. –û–±–Ω–æ–≤–∏—Ç–µ Redirect URLs

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

1. –í–∫–ª—é—á–∏—Ç–µ Vercel Analytics
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ Supabase Logs —Ä–µ–≥—É–ª—è—Ä–Ω–æ
